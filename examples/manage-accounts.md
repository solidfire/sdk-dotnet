#<img src="https://raw.githubusercontent.com/solidfire/sdk-dotnet/release1.1/img/net.png" height="50" width="50" > SolidFire .NET SDK Examples

## Manage Accounts

These examples walk through all interactions with an Account on the SolidFire cluster.

Examples for:

- [List all Accounts](#list-all-accounts)
- [Get one Account](#get-one-account)
- [Create an Account](#create-an-account)
- [Modify an Account](#modify-an-account)

### Documentation

Further documentation for each method and type can be found at our [.NET documentation site](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/R_Project_SolidFire__NET_SDK_Documentation.htm). 

### List all Accounts 

[ListAllAccounts method documentation](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_SolidFireElement_ListAccounts.htm)

To list all [Accounts](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) on a cluster:

~~~ csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");

// create the request object but leave all properties as default
var request = new ListAccountsRequest();

// send the request and gather the result
var listAccountsResult = sfe.ListAccounts(request);

// iterate the accounts array on the result object and display each account
foreach(Account account in listAccountsResult.Accounts)
{
    Console.WriteLine(account.ToString());
}
~~~

### Get one Account

[GetAccountByID method documentation](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_SolidFireElement_GetAccountByID.htm)

To get a single [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) by `ID`:

~~~ csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");
            
// send the request and gather the result
var getAccountResult = sfe.GetAccountByID(1);

// display the account from the result object
Console.WriteLine(getAccountResult.Account.ToString());
~~~

[GetAccountByName method documentation](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_SolidFireElement_GetAccountByName.htm)

To get a single [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) by `Username`:

~~~ csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");
            
// send the request and gather the result
var getAccountResult = sfe.GetAccountByName("username-of-account");

// display the account from the result object
Console.WriteLine(getAccountResult.Account.ToString());
~~~

### Create an Account

[CreateAccount method documentation](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_SolidFireElement_CreateAccount.htm)

To create an [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) you must specify the `Username` in the [AddAccountRequest](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_AddAccountRequest.htm) object. Optionally, you can also specify the `InitiatorSecret` and `TargetSecret` which are [CHAPSecret](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_CHAPSecret.htm) objects. If those secrets are not specified, they will be auto-generated by the API.

First, we create an [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) with only a `Username`:

~~~csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");

// create a request object and set the username property
var request = new AddAccountRequest()
{
    Username = "my-new-account"
};

// send the request and gather the result
var addAccountResult = sfe.AddAccount(request);

// grab the account ID from the result object
var newAccountId = addAccountResult.AccountID;
~~~

Now we create an [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm) and specify the `Username` and `InitiatorSecret` in the [AddAccountRequest](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_AddAccountRequest.htm) object. Notice we created a new [CHAPSecret](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_CHAPSecret.htm) object and set the string value for the `IntitiatorSecret` property. The `TargetSecret` will be auto-generated during the process on the cluster:

~~~csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");

// create a request object and set the username property
var request = new AddAccountRequest()
{
    Username = "my-new-account",
    InitiatorSecret = new CHAPSecret("a12To16charvalue")
};

// send the request and gather the result
var addAccountResult = sfe.AddAccount(request);

// grab the account ID from the result object
var newAccountId = addAccountResult.AccountID;
~~~

### Modify an Account

[ModifyAccount method documentation](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_SolidFireElement_ModifyAccount.htm)

To modify an [Account](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_Account.htm), all you need is the `AccountID` and the values you want to change present in the [ModifyAccountRequest](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_ModifyAccountRequest.htm) object. Any values you leave off will remain as they were before this call is made.

In this example, we will instruct the API to autogenerate a new `TargetSecret` value for an account. In order to do so we need to call the static [`AutoGenerate()`](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/M_SolidFire_Element_Api_CHAPSecret_AutoGenerate.htm) method on the [CHAPSecret](http://solidfire.github.io/sdk-dotnet/help/v1.1/html/T_SolidFire_Element_Api_CHAPSecret.htm) class. 

~~~ csharp
// Create connection to SF Cluster
var sfe = ElementFactory.Create("ip-address-of-cluster", "username", "password");

// create a request object and set the username property
var request = new ModifyAccountRequest()
{
    AccountID = 1,
    TargetSecret = CHAPSecret.AutoGenerate()
};

// send the request
sfe.ModifyAccount(request);
~~~

